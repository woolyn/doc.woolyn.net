+++
date = "2017-06-14T18:17:29+08:00"
title = "通信协议"
toc = true
weight = 2

+++

在物林平台中，设备和云端通信有两种方式可供选择：**MQTT** 和 **HTTP** 。

## MQTT 协议

MQTT（Message Queuing Telemetry Transport，消息队列遥测传输）协议专为物联网设计，它是一个轻量级的消息传输协议，基于发布/订阅机制，为物联网设备之间的小数据传输提供了便捷高效的支持。

MQTT 协议使得一个或多个设备可以向某一个**主题（Topic）**发送消息，其他订阅（subscribe）了该主题的设备可以实时地接收到消息。在物林平台中，每个设备可使用两个主题，分别用于传输普通数据和控制信号，也就是数据信道和控制信道。

由于特别注重轻量设计，通过MQTT传输的消息可以非常快速地传递到各个终端设备。鉴于物联网设备通常使用的无线网络具有不稳定的特点，MQTT 协议还设计了不同的服务质量（QoS）等级，实现对服务可靠性的灵活处理。

关于MQTT协议的详细信息，可参考[MQTT协议规范](https://mcxiaoke.gitbooks.io/mqtt-cn/content/)

## HTTP 协议

HTTP（HyperText Transfer Protocol，超文本传书协议）主要是用于传输网页内容的协议，也是当今互联网上使用最广泛的协议之一，在MQTT协议普及之前，有部分物联网设备使用 HTTP 协议和服务器之间传输数据。

相比MQTT协议，HTTP协议的报文中多出了不少冗余数据，而且不易实现类似MQTT协议的订阅机制，接收云端发来的控制信号多采用设备轮询的方式，不够及时，因此效率偏低。

由于 HTTP 协议使用了人类可读的文本格式设计，理解起来较简单，因此也比较适合开发入门级的物联网设备使用。另外，设备向云端传输较大的数据（如图像、声音等）时，使用HTTP协议也有一定的优势。

物林平台提供的 HTTP 接入方式主要用于传感器类设备上报数据。不建议使用 HTTP 协议接收控制信号。

## 总结

MQTT协议更加轻量高效、实时性高，推荐优先使用。关于具体的使用方法，请参阅后续章节。

